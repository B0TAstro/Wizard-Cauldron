{% extends 'base.html.twig' %}
{% block title %}Home{% endblock %}

{% block body %}
	<main class="min-h-[60dvh] flex items-center justify-center">
		<div class="text-center max-w-xl">
			<h1 class="text-3xl font-semibold mb-2">Wizard Cauldron</h1>
			<p class="text-white/80">
			Collect a unique spell every day and open the cauldron to try your luck!
			</p>

			{% if not app.user %}
			<div class="mt-6 space-x-2">
				<a href="{{ path('login') }}" class="px-3 py-2 rounded-lg bg-white text-black hover:bg-white/90">Log in</a>
				<a href="{{ path('register') }}" class="px-3 py-2 rounded-lg border border-white/20 hover:bg-white/10">Create an account</a>
			</div>
			{% else %}

			<p class="mt-3 mb-10 text-sm text-white/60">
				Rarities: Common 60% • Rare 25% • Epic 10% • Legendary 5%
			</p>

			{% set hasCoins = app.user.coins > 0 %}

			{% if openForm is defined and openForm %}
				{{ form_start(openForm, { attr: { class: 'inline' } }) }}
				<button
					{% if not hasCoins %}disabled aria-disabled="true"{% endif %}
					class="px-3 py-2 rounded-lg border {{ hasCoins ? 'border-white/20 hover:bg-white/10 hover:scale-[1.02]' : 'border-white/10 opacity-40 cursor-not-allowed' }} disabled:opacity-40 disabled:cursor-not-allowed">
					OPEN THE WIZARD CAULDRON
				</button>
				{{ form_end(openForm) }}
			{% endif %}

			{% if not hasCoins %}
				<p class="mt-3 text-sm text-white/60">
				You’re out of coins. Come back tomorrow for your daily coin!
				</p>
			{% endif %}
		{% endif %}
		</div>
	</main>
{% endblock %}
